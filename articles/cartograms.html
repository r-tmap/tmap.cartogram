<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Cartograms â€¢ tmap.cartogram</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cartograms">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tmap.cartogram</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/intro">Introduction</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/contiguous">Contiguous</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/non_contiguous">Non-Contiguous</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/dorling">Dorling</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-tmap/tmap.cartogram/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cartograms</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-tmap/tmap.cartogram/blob/main/vignettes/cartograms.Rmd" class="external-link"><code>vignettes/cartograms.Rmd</code></a></small>
      <div class="d-none name"><code>cartograms.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="cartogram">Cartogram<a class="anchor" aria-label="anchor" href="#cartogram"></a>
</h2>
<p>In cartograms, areal regions are distorted such that the obtained
area sizes are proportional to a quantitative variable. We facilitate
the following types:</p>
<ul>
<li>The <strong>contiguous cartogram</strong>, where the shapes of the
polygons are distorted, where the neighborhood relationships between
them are preserved as much as possible.</li>
<li>The <strong>non-contiguous cartogram</strong>, where the polygons
are only resized while they keep their shape.</li>
<li>The <strong>Dorling cartogram</strong> where polygons are replaced
by bubbles. Note that this is different from the <a href="https://r-tmap.github.io/tmap/articles/examples_bubble" class="external-link">bubble
map</a>: in a Dorlong cartogram the bubbles do not overlap. To achieve
non-overlapping bubbles that are proportional to the target variable,
the bubbles may be relocated.</li>
</ul>
<p>Currently, this packages uses the <a href="https://sjewo.github.io/cartogram/" class="external-link">cartogram</a> package by
Sebastian Jeworutzki under the hood.</p>
</div>
<div class="section level2">
<h2 id="map-projection">Map projection<a class="anchor" aria-label="anchor" href="#map-projection"></a>
</h2>
<p>In order to work well, it is strongly recommended to use a projected
<a href="https://r-tmap.github.io/tmap/articles/foundations_crs" class="external-link">CRS
(map projection)</a> that is (approximately) equal-area. Why? Because
the cartograms transformation require that that the area of polygons is
approximately proportional to the real areas. This is not the case for
the mercator projection (plain lat/lon coordinates).</p>
<p>For these examples we use the Robinson projection. If you are unsure
which to use, set <code>crs = "auto"</code> which enables a
(work-in-progress) automatic map projection recommendation.</p>
<p>In addition, this crs must be set in <a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link"><code>tm_shape()</code></a>,
and not afterwards via <a href="https://r-tmap.github.io/tmap/reference/tm_crs.html" class="external-link"><code>tm_crs()</code></a>.
Why? Because the former ensures that the transformation is applied in
the correct CRS, whereas the latter is used for plotting only.</p>
<p>Finally, we recommend to disable basemaps in view mode. Not only
because the polygons will be distorted (and therefore will not be
consistent with the basemaps), but because basemaps are usually rendered
in the (pseudo) mercator projection. By default a spatial object will
keep its projected CRS when basemaps are disabled.</p>
</div>
<div class="section level2">
<h2 id="contiguous-cartograms">Contiguous cartograms<a class="anchor" aria-label="anchor" href="#contiguous-cartograms"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Africa</span> <span class="op">=</span> <span class="va">World</span><span class="op">[</span><span class="va">World</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Africa"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">Africa</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"pop_est"</span>, options <span class="op">=</span> <span class="fu"><a href="../reference/tm_cartogram.html">opt_tm_cartogram</a></span><span class="op">(</span>itermax <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cartogram in progress...</span></span></code></pre></div>
<p><img src="cartograms_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>We can use polygon fill color to depict a variable, such as Happy
Planet Index:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">Africa</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"pop_est"</span>, </span>
<span>                 fill <span class="op">=</span> <span class="st">"life_exp"</span>,</span>
<span>                 fill.scale <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_scale_intervals.html" class="external-link">tm_scale_intervals</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"-cols4all.bu_br_div"</span><span class="op">)</span>,</span>
<span>                 fill.legend <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_legend.html" class="external-link">tm_legend</a></span><span class="op">(</span><span class="st">"Age"</span><span class="op">)</span>,</span>
<span>                 options <span class="op">=</span> <span class="fu"><a href="../reference/tm_cartogram.html">opt_tm_cartogram</a></span><span class="op">(</span>itermax <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_title.html" class="external-link">tm_title</a></span><span class="op">(</span><span class="st">"Life Expectancy"</span><span class="op">)</span></span></code></pre></div>
<p><img src="cartograms_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="non-contiguous-cartograms">Non-contiguous cartograms<a class="anchor" aria-label="anchor" href="#non-contiguous-cartograms"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">Africa</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram_ncont</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"pop_est"</span>, options <span class="op">=</span> <span class="fu"><a href="../reference/tm_cartogram.html">opt_tm_cartogram_ncont</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cartogram in progress...</span></span></code></pre></div>
<p><img src="cartograms_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">Africa</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram_ncont</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"pop_est"</span>, </span>
<span>                       fill <span class="op">=</span> <span class="st">"inequality"</span>,</span>
<span>                       fill.scale <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_scale_continuous.html" class="external-link">tm_scale_continuous</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"cols4all.pu_gn_div"</span>, values.range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       fill.legend <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_legend.html" class="external-link">tm_legend</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span>,</span>
<span>                       options <span class="op">=</span> <span class="fu"><a href="../reference/tm_cartogram.html">opt_tm_cartogram_ncont</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_text.html" class="external-link">tm_text</a></span><span class="op">(</span><span class="st">"name"</span>, options <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_text.html" class="external-link">opt_tm_text</a></span><span class="op">(</span>point.label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_title.html" class="external-link">tm_title</a></span><span class="op">(</span><span class="st">"Income inequality (Gini coefficient)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="cartograms_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<p>A non-contiguous cartogram of the World. The countries are resized
relative to population. The colors indicate carbon footprint.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">World</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, col <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram_ncont</a></span><span class="op">(</span></span>
<span>    size <span class="op">=</span> <span class="st">"pop_est"</span>, </span>
<span>    fill <span class="op">=</span> <span class="st">"footprint"</span>,</span>
<span>    fill.legend <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_legend.html" class="external-link">tm_legend</a></span><span class="op">(</span><span class="st">"Per capita greenhouse gas emissions"</span>, </span>
<span>      orientation <span class="op">=</span> <span class="st">"landscape"</span>, bg.color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span>,</span>
<span>    fill.scale <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_scale_continuous.html" class="external-link">tm_scale_continuous</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"brewer.yl_or_rd"</span>,</span>
<span>      values.range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_layout.html" class="external-link">tm_layout</a></span><span class="op">(</span>earth_boundary <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  frame <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  earth_boundary.lwd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  bg.color <span class="op">=</span> <span class="st">"#bbddff"</span>,</span>
<span>  space.color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cartogram in progress...</span></span></code></pre></div>
<p><img src="cartograms_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="dorlin-cartograms">Dorlin cartograms<a class="anchor" aria-label="anchor" href="#dorlin-cartograms"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">World</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_polygons</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram_dorling</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"pop_est"</span>, fill <span class="op">=</span> <span class="st">"yellow"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cartogram in progress...</span></span></code></pre></div>
<p><img src="cartograms_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>We can the bubble fill color to show some other data, such as press
freedom:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">World</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram_dorling</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"pop_est"</span>, </span>
<span>                         fill <span class="op">=</span> <span class="st">"press"</span>,</span>
<span>                         fill.scale <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_scale_continuous.html" class="external-link">tm_scale_continuous</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"cols4all.pu_gn_div"</span>, midpoint <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>                         fill.legend <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_legend.html" class="external-link">tm_legend</a></span><span class="op">(</span><span class="st">""</span>, height <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_title.html" class="external-link">tm_title</a></span><span class="op">(</span><span class="st">"World Press Freedom Index"</span><span class="op">)</span></span></code></pre></div>
<p><img src="cartograms_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="view-mode">View mode<a class="anchor" aria-label="anchor" href="#view-mode"></a>
</h2>
<p>These maps are also available interactively. As noted above the trick
in tmap is to disable basemaps. This can be done with
<code>tm_basemap(NULL)</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tmap_mode.html" class="external-link">tmap_mode</a></span><span class="op">(</span><span class="st">"view"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">â„¹</span> tmap mode set to <span style="color: #0000BB;">"view"</span>.</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">World</span>, crs <span class="op">=</span> <span class="st">"+proj=robin"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/tm_cartogram.html">tm_cartogram_dorling</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"pop_est"</span>, </span>
<span>                         fill <span class="op">=</span> <span class="st">"press"</span>,</span>
<span>                         fill.scale <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_scale_continuous.html" class="external-link">tm_scale_continuous</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"cols4all.pu_gn_div"</span>, midpoint <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>                         fill.legend <span class="op">=</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_legend.html" class="external-link">tm_legend</a></span><span class="op">(</span><span class="st">""</span>, height <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_title.html" class="external-link">tm_title</a></span><span class="op">(</span><span class="st">"World Press Freedom Index"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_basemap.html" class="external-link">tm_basemap</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">[view mode]</span> WebGL does not work (yet) with projected map projections, so it has</span></span>
<span><span class="co">#&gt; been disabled.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This message is displayed once per session.</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martijn Tennekes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
